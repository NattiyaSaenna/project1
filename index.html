<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>

<body>
    <a-scene>
        <a-assets>
            <a-asset-item id="set-obj" src="assets/room/set.gltf"></a-asset-item>
            <img src="assets/room/set.jpg">
            <a-asset-item id="floor-obj" src="assets/room/floor.gltf"></a-asset-item>
            <img id="floor-img" src="assets/room/flooron.png">
            <img id="flooroff-mtl" src="assets/room/flooroff.png">
            <a-asset-item id="spotlight-obj" src="assets/room/spotlight.gltf"></a-asset-item>
            <img id="spotlight-img" src="assets/room/spotlight.png">
            <img id="star-img" src="assets/room/star.png">
            <a-asset-item id="tv-obj" src="assets/room/tv.gltf"></a-asset-item>

            <audio id="music" src="./asset/music.mp3"></audio>
            <img id="background" src="/asset/background.jpg">

            <img src="/asset/disco.png" id="disco">


            <a-asset-item id="boy" src="asset/boy_1/scene.gltf"></a-asset-item>
            <a-asset-item id="girl" src="asset/girl_1/scene.gltf"></a-asset-item>
            <a-asset-item id="boy2" src="asset/boy_2/scene.gltf"></a-asset-item>

            <img id="TVScreenPic" src="asset/IMG_4399.jpg">
            
        </a-assets>

        <a-sky id="image-360" radius="100" src="#background" scale="1 1 1" rotation="0 -90 0"></a-sky>
        <a-entity gltf-model="#boy" position="-3.9 1 0" rotation="0 80 0" scale="0.005 0.005 0.005"></a-entity>
        <a-entity gltf-model="#girl" position="-3.9 -3 10" rotation="0 120 0" scale="0.05 0.05 0.05"></a-entity>
        <a-entity gltf-model="#boy2" position="0 -3 -10" rotation="0 30 0" scale="4 4 4" animation-mixer>
            <a-animation attribute="rotation" dur="2000" easing="linear" to="0 360 0" repeat="indefinite"></a-animation>
        </a-entity>

        <!-- disco -->
        <a-image id="discoImage" src="#disco" position="0 13 3.7" width="3.5" height="3.5"
            animation="property: rotation; to: 0 360 0; dur: 5000; easing: linear; loop: true;"></a-image>

        <!-- Lights -->
        <a-entity id="light0" light="color:#f8b927;intensity:2;type:point;" position="0 -2 0.5"></a-entity>
        <a-entity id="light1" light="type:point;color:#ab7121" position="-2.5 2.38 2.7"></a-entity>
        <a-entity id="light2" light="color:#205eff;type:point;" position="2.9 2.29 2.7"></a-entity>
        <a-entity id="light3" light="color:#a431f0;type:point;" position="-2.5 2.38 -2.5"></a-entity>
        <a-entity id="light4" light="color:#f130cf;intensity:0.66;type:point;" position="3 2.38 -0.61"></a-entity>

        <a-entity id="TV" class="intersectable">
            <a-plane color="#000000" position="8.81 5.786 3.689" rotation="0 90 0" material="color:#000000"
                geometry="height:4.6;width:8.46"></a-plane>
<!--             <a-video src="asset/video.mp4" position="8.81 4.3 4.8" rotation="0 90 0" geometry="height:20;width:40">
            </a-video> -->
            <a-image src="asset/IMG_4399.jpg" position="8.81 4.3 4.8" rotation="0 90 0" geometry="height:20;width:40">
            </a-image>
        </a-entity>
        <a-sound src="#music" autoplay="true" position="0 2 5"></a-sound>
    
    </a-scene>
    <script>
        // เริ่มต้นให้ภาพหมุนไปรอบเดียว
        rotateImage(0);

        // ฟังก์ชันเพื่อหมุนภาพ
        function rotateImage(degrees) {
            // หาค่า Y จากองศา
            var y = degrees;

            // กำหนดการหมุนใหม่
            document.getElementById('disc').setAttribute('rotation', '0 ' + y + ' 0');

            // เพิ่มองศาเพื่อให้ภาพหมุน
            degrees += 1;

            // เมื่อหมุนไปครบ 360 องศาให้กลับมาหมุนต่อจาก 0 องศา
            if (degrees >= 360) {
                degrees = 0;
            }

            // เรียกฟังก์ชันใหม่ทุกๆ 10 มิลลิวินาที
            setTimeout(function () {
                rotateImage(degrees);
            }, 1);
        }
    </script>

</body>

</html>
